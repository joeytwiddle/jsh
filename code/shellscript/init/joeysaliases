# Note: other aliases are initialised in dirhistorysetup

test "$COLUMNS" && export COLUMNS

if test -x "$JPATH/tools/mygrep"; then
	alias grep='mygrep'
fi

if test $JM_COLOUR_LS; then
	XARGS='h --color'
	## We should share the following with getmachineinfo's JM_LS_OPTS
	alias ls="ls -atrFb$XARGS"
elif test $JM_DOES_COLOUR; then
	alias ls='fakels'
else
	alias ls='ls -atrF'
fi

alias l='ls -l'
alias dl='ls -ld'

## Note: it's rather important that aliases don't get passed
## down to child shells / processes, because this would likely
## result in infinite loops.
### Er, I think that might be the default anyway!

alias xterm='xtermbg'

alias man='jman'

## I guess we need this as an aliased function because a script would lost the history!
if test "$SHORTSHELL" = zsh
then
	myhist() {
		history 1 | grep "$*"
	}

	### From Pawan zshrc:

	# set command completions
	compctl -a {,un}alias
	compctl -/ {c,push,pop}d
	compctl -c exec
	compctl -c man
	compctl -c {where,which}
	compctl -o {,un}setopt
	compctl -E {,un}setenv
	compctl -E printenv
	compctl -b bindkey
	## shell's jobs:
	compctl -j fg
	# compctl -j kill
	compctl -u chown
	compctl -g '*.(ps|eps)' gv

	# Autocomplete for current dir on filetypes
	compctl -g '*.Z *.gz *.tgz' + -g '*' zcat gunzip
	compctl -g '*.tar.Z *.tar.gz *.tgz *.tar.bz2 .*.tar.Z .*.tar.gz .*.tgz .*.tar.bz2' + -g '*' tar
	compctl -g '*.zip *.ZIP' + -g '*' unzip zip
	compctl -g '*.(mp3|MP3)' + -g '*(-/)'  mpg123 xmms

	setopt extendedglob
	setopt nohup
	setopt pathdirs

	case $TERM in 
		linux)
			bindkey "^[[2~" yank
			bindkey "^[[3~" delete-char
			bindkey "^[[5~" up-line-or-history ## PageUp
			bindkey "^[[6~" down-line-or-history ## PageDown
			bindkey "^[[1~" beginning-of-line
			bindkey "^[[4~" end-of-line
			bindkey "^[e" expand-cmd-path 
			bindkey "^[[A" up-line-or-search ## up arrow for back-history-search
			bindkey "^[[B" down-line-or-search ## down arrow for fwd-history-search
			bindkey " " magic-space ## do history expansion on space
		;;
		*xterm*|rxvt|\(dt|k|E|a\)term)
			bindkey "^[[2~" yank
			bindkey "^[[3~" delete-char
			bindkey "^[[5~" up-line-or-history ## PageUp
			bindkey "^[[6~" down-line-or-history ## PageDown
			bindkey "^[[7~" beginning-of-line
			bindkey "^[[8~" end-of-line
			bindkey "^[e" expand-cmd-path ## C-e for expanding path of typed command
			bindkey "^[[A" up-line-or-search ## up arrow for back-history-search
			bindkey "^[[B" down-line-or-search ## down arrow for fwd-history-search
			bindkey " " magic-space ## do history expansion on space
		;;
	esac

	# Setting HOME and END keys 
	case $TERM in (xterm*|aterm|rxvt)
		bindkey '\e[H' beginning-of-line
		bindkey '\e[F' end-of-line ;;
	esac

	# Binding of the keys for command line editing
	bindkey '^K' kill-region
	bindkey '^A' beginning-of-line
	bindkey '^E' end-of-line
	bindkey '^W' complete-word
	bindkey '^L' clear-screen
	bindkey '\e[1~' beginning-of-line	
	bindkey '\e[4~' end-of-line

	### End Pawan zshrc

elif test "$SHORTSHELL" = bash
then
	myhist() {
		history | grep "$*"
	}
fi
alias hist=myhist

myxv() {
xv -perfect "$@" &
}
alias xv=myxv

alias igrep='grep -i'

HIGHESTPRIORITYPROGS="cdrecord mkisofs xcdroast"
# HIGHPRIORITYPROGS='xmms mplayer mpg123'
## don't usually have root for these, but could sudo them

## I don't know why I had to `echo _`
for PROG in `echo $HIGHESTPRIORITYPROGS`
do alias "$PROG"="nice --20 $PROG"
done

# alias jhelp="$JPATH/tools/help" ## Because bash went and used it!
alias help='jhelp' ## Hehe I stole it back! (U can still type 'help' for bash's)

## Because it's nice for the user, but overriding is bad for scripts:
alias apropos=japropos

## We should do this for everything (no reason why not to, apart from memo diskspace usage I guess):
alias dusk="rememo dusk"

# alias wget='screen wget'

## Shellscripts in their own right, but oneliners: (could make functions)

alias quiet='fadevolume 0'
