# jsh-depends-ignore: viinxterm viminxterm gvim
# jsh-depends: runoneof xisrunning
if xisrunning
then
	FAVOURITE_EDITORS="viminxterm viinxterm nedit gedit dtpad kwrite gvim notepad"
else
	FAVOURITE_EDITORS="vim vi ae pico jpico gvim notepad"
	[ "$SCREENTITLE" ] || export SCREENTITLE="["`echo "$*" | afterlast / | cut -c -20`"]"
	screentitle "$SCREENTITLE"
fi

if test "$1" = -keepdate
then shift; KEEPDATE=true
fi

if test "$KEEPDATE"
then
	for X in "$@"
	do touch -r "$X" "$X".keepdate
	done
fi

runoneof "$FAVOURITE_EDITORS" "$@"

if test "$KEEPDATE"
then
	for X
	do
		touch -r "$X".keepdate "$X"
		rm -f "$X".keepdate
	done
fi
