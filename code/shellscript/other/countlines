#!/bin/sh

## TODO: test that wc -l gives the same results as awk on, eg. streams with no \n at end, echo's etc.
## Laziest: put the test in the code, with an assert, innit!

docountlines () {
	## Must remove spaces for backward-compatibility, and for external programs, such as expr which cannot handle 1 - "  20".
	cat "$@" | wc -l | tr -d ' '
	# awk " END { print "' NR } ' "$@"
}

if [ ! "$2" ]
then docountlines "$@"
else
	for X
	do echo "$X	"`docountlines "$X"`
	done
fi
