#!/bin/sh
if test "$1x$2" = "x"; then
  echo 'runoneof "<executables>" "<args>"'
  echo '  Will find and run on the first working executable!'
fi

LIST=$1;
# ARGS=`echo "$*" | afterfirst "$LIST"`;
shift
# ARGS="$@"

# echo "l='$LIST' a='$ARGS'"

for FILE in $LIST; do
  # echo "file: $FILE"
  # Problems on Solaris (which only builtin?)
  # TRY=`jwhich $FILE`
  TRY=`jwhich inj "$FILE"`
  # Uncomment this, disrupt $? next line
  # echo 'Got: "'$TRY'"'
  # if test "$?" = "0"; then
  if test ! "$TRY" = "" -a -x "$TRY"; then
    # echo "runoneof: trying $TRY"
    $TRY "$@"
		# $ARGS
    if test "$?" = "0"; then
      # echo "$TRY done good"
      # echo "runoneof: worked on $TRY"
      exit 0
    else
      # echo "$TRY done bad"
      echo 'runoneof: Failure on "'$TRY'"'
    fi
  else
    echo "runoneof: $TRY not executable"
  fi
done

echo "runoneof: could not get any of $LIST to work"
exit 1
