#!/bin/sh

if test "$1x$2" = "x"; then
  echo 'runoneof "<executables>" "<args>"'
  echo '  Will find and run on the first working executable!'
fi

LIST=$1;
shift

for FILE in $LIST; do

  # echo "file: $FILE"

  # which may not be present
  TRY=`jwhich inj "$FILE"`

  # WARNING: don't disrupt $? next line
  if test "$?" = "0"; then

    # echo "runoneof: trying $TRY"

    $TRY "$@"

    # WARNING: don't disrupt $? next line
    if test "$?" = "0"; then

      # echo "runoneof: worked on $TRY"
      exit 0

    else

      echo 'runoneof: failed on "'$TRY'" :-('

    fi

  else
    echo "runoneof: Did not find $FILE in path"
  fi

done

echo "runoneof: could not find working exe"
exit 1
