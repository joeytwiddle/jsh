#!/bin/sh

if test "$1x$2" = "x"; then
  echo 'runoneof "<executables>" <args...>'
  echo '  Will find and run on the first working executable!'
fi

LIST=$1;
shift

for FILE in $LIST; do

  # echo "file: $FILE" >> /dev/stderr

  # which may not be present
  TRY=`jwhich inj "$FILE"`

  # WARNING: don't disrupt $? next line
  if test "$?" = "0"; then

    # echo "runoneof: trying $TRY" >> /dev/stderr

    $TRY "$@"

    # WARNING: don't disrupt $? next line
    if test "$?" = "0"; then

      # echo "runoneof: worked on $TRY" >> /dev/stderr
      exit 0

    else

      echo 'runoneof: failed on "'$TRY'" :-(' >> /dev/stderr

    fi

  else
    echo "runoneof: Did not find $FILE in path" >> /dev/stderr
  fi

done

echo "runoneof: could not find working exe" >> /dev/stderr
exit 1
